イベントの会計のウェブアプリケーションを開発しています。

アプリの仕様は以下の通りです

構造
イベントには複数のウォレットを作成できます。
ウォレットには複数のパートを作成できます。

イベントに設定された予算はウォレットの予算限度額の合計になります。
同様にウォレットの予算限度額はパートの予算限度額の合計になります。

生徒はウォレットに所属します。
また、生徒はウォレットに所属するパートに所属します。

教師はウォレットにのみ所属します。
パート内で生徒は会計、副会計、メンバーのいずれかになります。


手続き
パートに所属している生徒は購入リクエストを作成できます。
購入リクエストは会計または副会計とそのパートが所属するウォレットの教師が承認することで承認完了状態に移行します。
承認完了状態の購入リクエストは購入完了状態に移行します。


初期化
作成の順序はイベント、ウォレット、パート、教師、生徒の順になります。


ルーティング
_index
ホームページです

auth._index
認証ページです
現在は開発段階なので後述するadminページにアクセスできます

auth.logout
セッションを削除してください

admin._index
管理者のホームページです
現在はほかのadminページに飛ぶリンクだけを置きます

admin.event._index
イベントの管理ページです
ウォレット、パートの作成、管理ができます

admin.event._index.wallet.new
ウォレットの作成ページです
予算割り振りや同時にパートの作成もできます

_app
アプリケーションルートです
生徒や教師といったユーザーはこのルートにアクセスします

_app.student._index
生徒のホームページです

_app.student.wallet.$walletId._index
生徒のウォレットのホームページです

_app.student.part.$partId._index
生徒のパートのホームページです

_app.student.part.$partId.request._index
パートの現在のリクエストを表示します

_app.student.part.$partId.request.new
購入リクエストの作成ページです

_app.student.part.$partId.request.$requestId._index
購入リクエストの承認を行います。会計と副会計の生徒のみがアクセスできます。

_app.teacher._index
教師のホームページです

_app.teacher.request._index
教師が所属するウォレットに所属するパート内の購入リクエストを表示します

_app.teacher.request.$requestId._index
購入リクエストの承認を行います。

_app.teacher.wallet._index
教師のウォレットのホームページです





